<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>{{ .Site.Title }}</title>
    <style>
        /* åŸºç¡€é‡ç½® */
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        html {
            scroll-behavior: smooth;
        }

        body {
            font-family: "PingFang SC", "Microsoft YaHei", sans-serif;
            line-height: 1.8;
            color: #e0e0e0;
            background: #050a20;
            min-height: 100vh;
            overflow-x: hidden;
            position: relative;
        }

        /* æ˜Ÿç©ºèƒŒæ™¯ - ä¼˜åŒ–æ€§èƒ½ */
        #stars {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            z-index: 0;
            /* ç¡¬ä»¶åŠ é€Ÿ */
            transform: translateZ(0);
        }

        /* èœå•æŒ‰é’® */
        .menu-btn {
            position: fixed;
            top: 20px;
            right: 20px;
            z-index: 1000;
            width: 50px;
            height: 50px;
            border-radius: 50%;
            background: radial-gradient(circle, #7877c6 0%, #5a58a8 100%);
            border: none;
            color: white;
            font-size: 1.2rem;
            cursor: pointer;
            box-shadow: 0 0 20px rgba(120,119,198,0.5);
            transition: all 0.3s ease;
            display: flex;
            align-items: center;
            justify-content: center;
            /* ç¡¬ä»¶åŠ é€Ÿ */
            transform: translateZ(0);
        }

        .menu-btn:hover {
            transform: scale(1.1);
            box-shadow: 0 0 30px rgba(120,119,198,0.7);
        }

        /* å¯¼èˆªèœå• */
        .nav-menu {
            position: fixed;
            top: 80px;
            right: 20px;
            z-index: 999;
            width: 240px;
            background: rgba(10,14,39,0.95);
            backdrop-filter: blur(12px);
            border-radius: 16px;
            border: 1px solid rgba(120,119,198,0.3);
            box-shadow: 0 8px 32px rgba(0,0,0,0.3);
            padding: 20px;
            display: none;
            opacity: 0;
            transform: translateY(10px);
            transition: all 0.3s ease;
        }

        .nav-menu.active {
            display: block;
            opacity: 1;
            transform: translateY(0);
        }

        .nav-menu h3 {
            font-size: 1.2rem;
            background: linear-gradient(90deg, #7877c6, #ff77c6);
            -webkit-background-clip: text;
            background-clip: text;
            -webkit-text-fill-color: transparent;
            margin-bottom: 15px;
            padding-bottom: 10px;
            border-bottom: 1px solid rgba(120,119,198,0.2);
            text-align: center;
        }

        .nav-menu ul {
            list-style: none;
        }

        .nav-menu ul li {
            margin-bottom: 10px;
        }

        .nav-menu ul li a {
            color: #b0b0c0;
            text-decoration: none;
            font-size: 1rem;
            padding: 8px 12px;
            border-radius: 8px;
            display: block;
            transition: all 0.2s ease;
        }

        .nav-menu ul li a:hover,
        .nav-menu ul li a.active {
            background: rgba(120,119,198,0.2);
            color: #fff;
            transform: translateX(5px);
        }

        /* æ˜Ÿçƒå®¹å™¨ */
        .nebula-container {
            position: relative;
            width: 100vw;
            height: 100vh;
            display: flex;
            align-items: center;
            justify-content: center;
            z-index: 1;
        }

        /* ä¸­å¿ƒæ ‡é¢˜ */
        .center-title {
            position: absolute;
            z-index: 2;
            text-align: center;
        }

        .center-title h1 {
            font-size: clamp(2rem, 5vw, 3rem); /* å“åº”å¼å­—ä½“ */
            background: linear-gradient(90deg, #7877c6, #ff77c6, #77c6ff);
            -webkit-background-clip: text;
            background-clip: text;
            -webkit-text-fill-color: transparent;
            margin-bottom: 10px;
            text-shadow: 0 0 20px rgba(120,119,198,0.3);
        }

        .center-title p {
            color: #a0a0c0;
            font-size: clamp(0.9rem, 2vw, 1.1rem);
        }

        /* æ˜Ÿçƒè½¨é“ */
        .orbit {
            position: relative;
            width: clamp(300px, 80vw, 600px); /* å“åº”å¼è½¨é“ */
            height: clamp(300px, 80vw, 600px);
            border-radius: 50%;
        }

        /* æ˜Ÿçƒæ ·å¼ */
        .nebula-planet {
            position: absolute;
            width: clamp(70px, 15vw, 120px);
            height: clamp(70px, 15vw, 120px);
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            text-align: center;
            cursor: pointer;
            transition: all 0.4s ease;
            z-index: 3;
            background: none;
            border: none;
            box-shadow: none;
        }

        /* æ˜Ÿçƒæ ¸å¿ƒ */
        .planet-core {
            width: 100%;
            height: 100%;
            border-radius: 50%;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            position: relative;
            box-shadow: 0 0 40px rgba(120,119,198,0.3);
            animation: planet-pulse 6s ease-in-out infinite alternate;
        }

        /* æ˜Ÿçƒé¢œè‰²å·®å¼‚åŒ– */
        #about .planet-core { background: radial-gradient(circle at 30% 30%, rgba(120,119,198,0.8) 0%, rgba(80,79,150,0.4) 100%); }
        #projects .planet-core { background: radial-gradient(circle at 30% 30%, rgba(255,119,198,0.8) 0%, rgba(180,80,140,0.4) 100%); }
        #community .planet-core { background: radial-gradient(circle at 30% 30%, rgba(119,200,255,0.8) 0%, rgba(80,140,180,0.4) 100%); }
        #guide .planet-core { background: radial-gradient(circle at 30% 30%, rgba(255, 119, 119, 0.8) 0%, rgba(180, 80, 80, 0.4) 100%); }
        #contributors .planet-core { background: radial-gradient(circle at 30% 30%, rgba(119,255,198,0.8) 0%, rgba(80,180,140,0.4) 100%); }
        #links .planet-core { background: radial-gradient(circle at 30% 30%, rgba(255,200,119,0.8) 0%, rgba(180,140,80,0.4) 100%); }
        #join .planet-core { background: radial-gradient(circle at 30% 30%, rgba(200,119,255,0.8) 0%, rgba(140,80,180,0.4) 100%); }

        /* æ˜ŸçƒåŠ¨ç”» */
        @keyframes planet-pulse {
            0% { transform: scale(1); box-shadow: 0 0 40px rgba(120,119,198,0.3); }
            100% { transform: scale(1.08); box-shadow: 0 0 60px rgba(120,119,198,0.5); }
        }

        .nebula-planet:hover {
            transform: scale(1.15);
            z-index: 4;
        }

        /* æ˜Ÿçƒæ–‡å­— */
        .planet-title {
            color: white;
            font-size: clamp(0.75rem, 2vw, 1rem);
            font-weight: 600;
            text-shadow: 0 2px 4px rgba(0,0,0,0.5);
            pointer-events: none;
        }

        .planet-brief {
            color: rgba(255,255,255,0.8);
            font-size: clamp(0.65rem, 1.5vw, 0.75rem);
            margin-top: 5px;
            text-shadow: 0 1px 2px rgba(0,0,0,0.5);
            pointer-events: none;
            display: block;
        }

        /* ç§»åŠ¨ç«¯éšè—æ˜Ÿçƒç®€çŸ­æè¿° */
        @media (max-width: 480px) {
            .planet-brief {
                display: none;
            }
        }

        /* æ˜Ÿçƒä½ç½® - é€‚é…å“åº”å¼ */
        #about { top: 0; left: 50%; transform: translate(-50%, -50%); }
        #projects { top: 15%; right: 15%; transform: translate(50%, -50%); }
        #community { bottom: 15%; right: 15%; transform: translate(50%, 50%); }
        #guide { bottom: 0; right: 30%; transform: translate(50%, 50%); }
        #contributors { bottom: 0; left: 50%; transform: translate(-50%, 50%); }
        #links { bottom: 15%; left: 15%; transform: translate(-50%, 50%); }
        #join { top: 15%; left: 15%; transform: translate(-50%, -50%); }

        /* è¯¦æƒ…å¼¹çª— */
        .planet-detail {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(10,14,39,0.95);
            backdrop-filter: blur(12px);
            z-index: 100;
            display: none;
            align-items: center;
            justify-content: center;
            padding: clamp(20px, 5vw, 40px);
            overflow-y: auto;
        }

        .planet-detail.active {
            display: flex;
        }

        .detail-content {
            max-width: 800px;
            width: 100%;
            padding: clamp(20px, 5vw, 40px);
            border-radius: 24px;
            border: 1px solid rgba(120,119,198,0.3);
            background: rgba(10,14,39,0.8);
            box-shadow: 0 8px 40px rgba(0,0,0,0.5);
        }

        .detail-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 30px;
            padding-bottom: 20px;
            border-bottom: 2px solid rgba(120,119,198,0.2);
        }

        .detail-header h2 {
            font-size: clamp(1.8rem, 4vw, 2.2rem);
            background: linear-gradient(90deg, #7877c6, #ff77c6);
            -webkit-background-clip: text;
            background-clip: text;
            -webkit-text-fill-color: transparent;
        }

        .close-detail {
            width: 40px;
            height: 40px;
            border-radius: 50%;
            background: rgba(255,255,255,0.1);
            border: none;
            color: white;
            font-size: 1.2rem;
            cursor: pointer;
            transition: all 0.2s ease;
        }

        .close-detail:hover {
            background: rgba(255,255,255,0.2);
            transform: rotate(90deg);
        }

        /* è¯¦æƒ…å†…å®¹ */
        .detail-body h3 {
            color: #d0d0e0;
            margin-bottom: 15px;
            font-size: 1.5rem;
        }

        .detail-body p,
        .detail-body li {
            color: #c0c0d0;
            margin-bottom: 12px;
            font-size: 1.1rem;
        }

        /* ç½‘æ ¼å¸ƒå±€ */
        .project-grid, .links-grid, .contributor-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
            gap: 20px;
            margin-top: 20px;
        }

        /* å¡ç‰‡æ ·å¼ */
        .project-card, .link-card, .contributor-card {
            padding: 20px;
            background: rgba(255,255,255,0.05);
            border-radius: 12px;
            border: 1px solid rgba(120,119,198,0.2);
            transition: all 0.3s ease;
        }

        .project-card:hover, .link-card:hover, .contributor-card:hover {
            transform: translateY(-5px);
            border-color: rgba(120,119,198,0.5);
        }

        .project-card a, .link-card a {
            color: #7877c6;
            font-weight: 600;
            text-decoration: none;
        }

        .project-card a:hover, .link-card a:hover {
            color: #ff77c6;
        }

        .project-desc, .link-desc {
            color: #a0a0c0;
            font-size: 0.95rem;
            margin-top: 10px;
        }

        .project-lang {
            display: inline-block;
            padding: 5px 10px;
            background: rgba(120,119,198,0.2);
            border-radius: 16px;
            font-size: 0.85rem;
            color: #c0c0e0;
            margin-top: 10px;
        }

        /* è´¡çŒ®è€…å¡ç‰‡ */
        .contributor-avatar {
            width: 70px;
            height: 70px;
            border-radius: 50%;
            margin: 0 auto 10px;
            object-fit: cover;
            border: 2px solid rgba(120,119,198,0.4);
        }

        .contributor-name {
            font-size: 1.1rem;
            font-weight: 600;
            color: #e0e0e0;
            text-align: center;
            margin-bottom: 5px;
        }

        .contributor-desc {
            font-size: 0.9rem;
            color: #a0a0c0;
            text-align: center;
            margin-bottom: 10px;
        }

        .contributor-github {
            display: block;
            color: #7877c6;
            font-size: 0.9rem;
            text-decoration: none;
            text-align: center;
        }

        .contributor-github:hover {
            color: #ff77c6;
        }

        /* ç¤¾åŒºåˆ†ç»„ */
        .community-group {
            margin-bottom: 25px;
            padding: 20px;
            background: rgba(255,255,255,0.05);
            border-radius: 12px;
            border: 1px solid rgba(255,255,255,0.1);
        }

        /* åŠ è½½åŠ¨ç”» */
        .loading-spinner {
            display: inline-block;
            width: 40px;
            height: 40px;
            border: 4px solid rgba(120,119,198,0.2);
            border-radius: 50%;
            border-top-color: #7877c6;
            animation: spin 1s ease-in-out infinite;
            margin: 20px auto;
            display: block;
        }

        @keyframes spin {
            to { transform: rotate(360deg); }
        }

        /* é”™è¯¯æç¤º */
        .error-message {
            color: #ff7777;
            text-align: center;
            margin: 20px 0;
        }

        /* é‡è¯•æŒ‰é’® */
        .retry-btn {
            display: block;
            margin: 10px auto;
            padding: 8px 16px;
            background: rgba(120,119,198,0.3);
            border: 1px solid #7877c6;
            border-radius: 8px;
            color: white;
            cursor: pointer;
            transition: all 0.2s ease;
        }

        .retry-btn:hover {
            background: rgba(120,119,198,0.5);
        }

        /* ç§»åŠ¨ç«¯é€‚é… - ç²¾ç®€é‡å¤æ ·å¼ */
        @media (max-width: 768px) {
            .nav-menu {
                width: 200px;
                right: 10px;
            }

            .menu-btn {
                width: 45px;
                height: 45px;
                font-size: 1rem;
            }

            /* æ˜Ÿçƒä½ç½®å¾®è°ƒ */
            #projects { top: 15%; right: 10%; }
            #community { bottom: 15%; right: 10%; }
            #guide { bottom: 0; right: 25%; }
            #links { bottom: 15%; left: 10%; }
            #join { top: 15%; left: 10%; }
        }
    </style>
</head>
<body>
    <!-- æ˜Ÿç©ºç²’å­èƒŒæ™¯ -->
    <canvas id="stars"></canvas>

    <!-- èœå•æŒ‰é’® -->
    <button class="menu-btn" id="menuBtn">â˜°</button>

    <!-- å¯¼èˆªèœå• -->
    <div class="nav-menu" id="navMenu">
        <h3>NebulaCommune</h3>
        <ul>
            <li><a data-target="about" class="nav-link">å…³äºæˆ‘ä»¬</a></li>
            <li><a data-target="projects" class="nav-link">æ ¸å¿ƒé¡¹ç›®</a></li>
            <li><a data-target="community" class="nav-link">ç¤¾åŒºç”Ÿæ€</a></li>
            <li><a href="/guide.html" class="nav-link">è´¡çŒ®æŒ‡å—</a></li>
            <li><a data-target="contributors" class="nav-link">è´¡çŒ®è€…</a></li>
            <li><a data-target="links" class="nav-link">å‹æƒ…é“¾æ¥</a></li>
            <li><a data-target="join" class="nav-link">åŠ å…¥æˆ‘ä»¬</a></li>
        </ul>
    </div>

    <!-- æ˜Ÿçƒå®¹å™¨ -->
    <div class="nebula-container">
        <div class="center-title">
            <h1>NebulaCommune</h1>
            <p>æ±‡èšæ˜Ÿå…‰ Â· å…±ç­‘æœªæ¥</p>
        </div>

        <div class="orbit">
            <!-- æ˜Ÿçƒåˆ—è¡¨ -->
            <div class="nebula-planet" id="about" data-target="about-detail">
                <div class="planet-core">
                    <div class="planet-title">å…³äºæˆ‘ä»¬</div>
                    <div class="planet-brief">å¼€æ”¾åŒ…å®¹çš„ç¤¾åŒº</div>
                </div>
            </div>
            <div class="nebula-planet" id="projects" data-target="projects-detail">
                <div class="planet-core">
                    <div class="planet-title">æ ¸å¿ƒé¡¹ç›®</div>
                    <div class="planet-brief">å…±å»ºå¼€æºæˆæœ</div>
                </div>
            </div>
            <div class="nebula-planet" id="community" data-target="community-detail">
                <div class="planet-core">
                    <div class="planet-title">ç¤¾åŒºç”Ÿæ€</div>
                    <div class="planet-brief">è½»æ¾äº¤æµåä½œ</div>
                </div>
            </div>
            <div class="nebula-planet" id="guide" onclick="window.location.href='/guide.html'">
                <div class="planet-core">
                    <div class="planet-title">è´¡çŒ®æŒ‡å—</div>
                    <div class="planet-brief">å…±å»ºç¤¾åŒºçš„æ–¹å¼</div>
                </div>
            </div>
            <div class="nebula-planet" id="contributors" data-target="contributors-detail">
                <div class="planet-core">
                    <div class="planet-title">è´¡çŒ®è€…</div>
                    <div class="planet-brief">æ„Ÿè°¢æ˜Ÿå…‰åŒè¡Œè€…</div>
                </div>
            </div>
            <div class="nebula-planet" id="links" data-target="links-detail">
                <div class="planet-core">
                    <div class="planet-title">å‹æƒ…é“¾æ¥</div>
                    <div class="planet-brief">è¿æ¥æŠ€æœ¯åŒå¥½</div>
                </div>
            </div>
            <div class="nebula-planet" id="join" data-target="join-detail">
                <div class="planet-core">
                    <div class="planet-title">åŠ å…¥æˆ‘ä»¬</div>
                    <div class="planet-brief">ä¸æˆ‘ä»¬å…±æˆé•¿</div>
                </div>
            </div>
        </div>
    </div>

    <!-- è¯¦æƒ…å¼¹çª—æ¨¡æ¿ -->
    <div class="planet-detail" id="about-detail">
        <div class="detail-content">
            <div class="detail-header">
                <h2>å…³äºæˆ‘ä»¬</h2>
                <button class="close-detail">Ã—</button>
            </div>
            <div class="detail-body">
                <p>æ˜Ÿéš…å…±å­¦ç¤¾åŒºï¼ˆNebulaCommuneï¼‰æ˜¯ä¸€ä¸ªå¼€æ”¾åŒ…å®¹çš„æŠ€æœ¯å­¦ä¹ ä¸åä½œç¤¾åŒºã€‚æˆ‘ä»¬ç›¸ä¿¡çŸ¥è¯†çš„ä»·å€¼åœ¨äºåˆ†äº«ä¸ç¢°æ’ï¼Œè‡´åŠ›äºä¸ºæ¯ä¸€ä½æˆå‘˜æä¾›ä¸€ä¸ªè‡ªç”±ã€äº’åŠ©çš„æˆé•¿ç©ºé—´ã€‚</p>
                <ul>
                    <li>æ ¸å¿ƒç†å¿µï¼šå¼€æ”¾åŒ…å®¹ï¼Œå…¼æ”¶å¹¶è“„ï¼Œå…±å­¦å…±è¿›</li>
                    <li>æ„¿æ™¯ï¼šæ±‡èšæ˜Ÿå…‰ï¼Œå…±ç­‘æœªæ¥</li>
                    <li>ä½¿å‘½ï¼šæ‰“é€ ä¸€ä¸ªå¤šå…ƒã€åä½œã€å¯æŒç»­çš„æŠ€æœ¯ç”Ÿæ€</li>
                </ul>
            </div>
        </div>
    </div>

    <div class="planet-detail" id="projects-detail">
        <div class="detail-content">
            <div class="detail-header">
                <h2>æ ¸å¿ƒé¡¹ç›®</h2>
                <button class="close-detail">Ã—</button>
            </div>
            <div class="detail-body">
                <div class="project-grid" id="projectGrid">
                    <div class="loading-spinner"></div>
                    <p style="text-align: center;">æ­£åœ¨åŠ è½½é¡¹ç›®æ•°æ®...</p>
                </div>
            </div>
        </div>
    </div>

    <div class="planet-detail" id="community-detail">
        <div class="detail-content">
            <div class="detail-header">
                <h2>ç¤¾åŒºç”Ÿæ€</h2>
                <button class="close-detail">Ã—</button>
            </div>
            <div class="detail-body">
                <div class="community-group">
                    <h3>ğŸ’¬ NebulaCommune æ°´ç¾¤</h3>
                    <p>æ—¥å¸¸äº¤æµã€èµ„æºå…±äº«ä¸ç”Ÿæ´»åˆ†äº«çš„è½»æ¾ç©ºé—´ã€‚</p>
                    <ul>
                        <li>è¯¾ç¨‹ä½œä¸šä¸æœŸæœ«å¤ä¹ ç»éªŒ</li>
                        <li>ç§‘ç ”/é¡¹ç›®ç»„é˜Ÿä¸æŠ€æœ¯é€‰å‹</li>
                        <li>å®ä¹ /æ ¡æ‹›é¢ç»ä¸å†…æ¨ä¿¡æ¯</li>
                        <li>å·¥å…·æ¨èä¸æ•ˆç‡æå‡æŠ€å·§</li>
                    </ul>
                </div>
                <div class="community-group">
                    <h3>ğŸ’¬ NebulaCommune æ ¸å¿ƒç¾¤</h3>
                    <p>æ ¸å¿ƒæˆå‘˜æ·±åº¦äº¤æµå¹³å°ï¼Œèšç„¦æŠ€æœ¯ã€é¡¹ç›®ä¸ç¤¾åŒºæ²»ç†ã€‚</p>
                </div>
            </div>
        </div>
    </div>

    <div class="planet-detail" id="contributors-detail">
        <div class="detail-content">
            <div class="detail-header">
                <h2>è´¡çŒ®è€…</h2>
                <button class="close-detail">Ã—</button>
            </div>
            <div class="detail-body">
                <p>æ„Ÿè°¢æ¯ä¸€ä½ä¸º NebulaCommune è´¡çŒ®åŠ›é‡çš„ä¼™ä¼´ âœ¨</p>
                <div class="contributor-grid" id="contributorGrid">
                    <div class="loading-spinner"></div>
                    <p style="text-align: center;">æ­£åœ¨åŠ è½½è´¡çŒ®è€…æ•°æ®...</p>
                </div>
            </div>
        </div>
    </div>

    <div class="planet-detail" id="links-detail">
        <div class="detail-content">
            <div class="detail-header">
                <h2>å‹æƒ…é“¾æ¥</h2>
                <button class="close-detail">Ã—</button>
            </div>
            <div class="detail-body">
                <div class="links-grid">
                    <div class="link-card">
                        <a href="https://duckweed-yhb.github.io/" target="_blank">Duckweed's Blog</a>
                        <p class="link-desc">ä¸ªäººæŠ€æœ¯åšå®¢ï¼Œåˆ†äº«å­¦ä¹ ä¸å®è·µå¿ƒå¾—</p>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <div class="planet-detail" id="join-detail">
        <div class="detail-content">
            <div class="detail-header">
                <h2>åŠ å…¥æˆ‘ä»¬</h2>
                <button class="close-detail">Ã—</button>
            </div>
            <div class="detail-body">
                <ol>
                    <li>è´¡çŒ®ä»£ç ï¼šFork é¡¹ç›®ï¼Œæäº¤ Pull Request</li>
                    <li>åˆ†äº«èµ„æºï¼šåœ¨ awesome-resources åˆ†äº«ä¼˜è´¨å†…å®¹</li>
                    <li>å‚ä¸è®¨è®ºï¼šåŠ å…¥å¾®ä¿¡ç¾¤ï¼Œä¸€èµ·å­¦ä¹ æˆé•¿</li>
                    <li>æå‡ºå»ºè®®ï¼šé€šè¿‡ Issue å‘Šè¯‰æˆ‘ä»¬ä½ çš„æƒ³æ³•</li>
                </ol>
            </div>
        </div>
    </div>

    <script>
        // ========== 1. é…ç½®æ¨¡å—ï¼ˆç»Ÿä¸€ç®¡ç†é…ç½®ï¼‰ ==========
        const AppConfig = {
            orgName: 'NebulaCommune',
            cache: {
                contributors: 'nebula_contributors_cache',
                contributorsTime: 'nebula_contributors_cache_time',
                repos: 'nebula_repos_cache',
                reposTime: 'nebula_repos_cache_time'
            },
            api: {
                baseUrl: 'https://api.github.com',
                perPage: 100,
                timeout: 10000,
                batchSize: 5,
                delay: 100, // è¯·æ±‚é—´éš”ï¼ˆé˜²é™æµï¼‰
                token: '' // å¯é€‰ï¼šGitHub Token
            },
            cacheExpire: 24 * 60 * 60 * 1000, // 24å°æ—¶ç¼“å­˜
            performance: {
                starCount: navigator.hardwareConcurrency < 4 || window.innerWidth < 768 ? 150 : 400
            }
        };

        // ========== 2. å·¥å…·å‡½æ•°æ¨¡å—ï¼ˆå¤ç”¨é€»è¾‘ï¼‰ ==========
        const Utils = {
            // æœ¬åœ°å­˜å‚¨å°è£…
            storage: {
                get(key) {
                    try {
                        return localStorage.getItem(key);
                    } catch (e) {
                        console.warn('æœ¬åœ°å­˜å‚¨ä¸å¯ç”¨:', e);
                        return null;
                    }
                },
                set(key, value) {
                    try {
                        localStorage.setItem(key, value);
                    } catch (e) {
                        console.warn('æœ¬åœ°å­˜å‚¨ä¸å¯ç”¨:', e);
                    }
                }
            },

            // å¸¦è¶…æ—¶çš„è¯·æ±‚
            fetchWithTimeout(url, options = {}) {
                return Promise.race([
                    fetch(url, options),
                    new Promise((_, reject) => 
                        setTimeout(() => reject(new Error('è¯·æ±‚è¶…æ—¶')), options.timeout || AppConfig.api.timeout)
                    )
                ]);
            },

            // åˆ›å»ºè¯·æ±‚å¤´
            createRequestHeaders() {
                const headers = { 'Accept': 'application/vnd.github.v3+json' };
                if (AppConfig.api.token) {
                    headers['Authorization'] = `token ${AppConfig.api.token}`;
                }
                return headers;
            },

            // é˜²æŠ–å‡½æ•°
            debounce(fn, delay) {
                let timer = null;
                return (...args) => {
                    clearTimeout(timer);
                    timer = setTimeout(() => fn.apply(this, args), delay);
                };
            }
        };

        // ========== 3. GitHub API æ¨¡å—ï¼ˆç»Ÿä¸€å¤„ç†APIè¯·æ±‚ï¼‰ ==========
        const GitHubAPI = {
            // è·å–æ‰€æœ‰ä»“åº“ï¼ˆå¤„ç†åˆ†é¡µï¼‰
            async getAllRepos() {
                const now = Date.now();
                // ä¼˜å…ˆè¯»å–ç¼“å­˜
                const cached = Utils.storage.get(AppConfig.cache.repos);
                const cachedTime = Utils.storage.get(AppConfig.cache.reposTime);
                
                if (cached && cachedTime && (now - parseInt(cachedTime) < AppConfig.cacheExpire)) {
                    return JSON.parse(cached).filter(repo => !repo.private);
                }

                const headers = Utils.createRequestHeaders();
                let allRepos = [];
                let page = 1;
                let hasMore = true;

                while (hasMore) {
                    try {
                        const url = `${AppConfig.api.baseUrl}/orgs/${AppConfig.orgName}/repos?per_page=${AppConfig.api.perPage}&page=${page}`;
                        const resp = await Utils.fetchWithTimeout(url, { headers, timeout: AppConfig.api.timeout });
                        
                        if (!resp.ok) throw new Error(`API é”™è¯¯: ${resp.status}`);
                        const pageRepos = await resp.json();
                        
                        if (pageRepos.length === 0) {
                            hasMore = false;
                            break;
                        }

                        allRepos = [...allRepos, ...pageRepos];
                        page++;
                        await new Promise(resolve => setTimeout(resolve, AppConfig.api.delay));
                    } catch (err) {
                        console.error('è·å–ä»“åº“å¤±è´¥:', err);
                        throw err;
                    }
                }

                // è¿‡æ»¤å…¬å¼€ä»“åº“å¹¶ç¼“å­˜
                const publicRepos = allRepos.filter(repo => !repo.private);
                Utils.storage.set(AppConfig.cache.repos, JSON.stringify(publicRepos));
                Utils.storage.set(AppConfig.cache.reposTime, now.toString());
                
                return publicRepos;
            },

            // è·å–æ‰€æœ‰è´¡çŒ®è€…
            async getAllContributors() {
                const now = Date.now();
                // ä¼˜å…ˆè¯»å–ç¼“å­˜
                const cached = Utils.storage.get(AppConfig.cache.contributors);
                const cachedTime = Utils.storage.get(AppConfig.cache.contributorsTime);
                
                if (cached && cachedTime && (now - parseInt(cachedTime) < AppConfig.cacheExpire)) {
                    return JSON.parse(cached);
                }

                try {
                    // å…ˆè·å–æ‰€æœ‰å…¬å¼€ä»“åº“
                    const repos = await this.getAllRepos();
                    const contributorsMap = new Map();
                    const headers = Utils.createRequestHeaders();

                    // æ‰¹é‡è·å–è´¡çŒ®è€…
                    for (let i = 0; i < repos.length; i += AppConfig.api.batchSize) {
                        const batch = repos.slice(i, i + AppConfig.api.batchSize);
                        const batchPromises = batch.map(repo => 
                            Utils.fetchWithTimeout(`${AppConfig.api.baseUrl}/repos/${AppConfig.orgName}/${repo.name}/contributors`, { headers })
                                .then(resp => resp.ok ? resp.json() : [])
                                .catch(() => [])
                        );

                        const batchResults = await Promise.all(batchPromises);
                        
                        batchResults.forEach((contributors, idx) => {
                            const repo = batch[idx];
                            contributors.forEach(c => {
                                if (contributorsMap.has(c.login)) {
                                    contributorsMap.get(c.login).repos.push(repo.name);
                                } else {
                                    contributorsMap.set(c.login, {
                                        login: c.login,
                                        avatar: c.avatar_url,
                                        html_url: c.html_url,
                                        repos: [repo.name],
                                        contributions: c.contributions
                                    });
                                }
                            });
                        });
                    }

                    const contributors = Array.from(contributorsMap.values());
                    // ç¼“å­˜æ•°æ®
                    Utils.storage.set(AppConfig.cache.contributors, JSON.stringify(contributors));
                    Utils.storage.set(AppConfig.cache.contributorsTime, now.toString());
                    
                    return contributors;
                } catch (err) {
                    console.error('è·å–è´¡çŒ®è€…å¤±è´¥:', err);
                    throw err;
                }
            }
        };

        // ========== 4. UI æ¸²æŸ“æ¨¡å—ï¼ˆç»Ÿä¸€å¤„ç†DOMæ¸²æŸ“ï¼‰ ==========
        const UIRenderer = {
            // æ¸²æŸ“ä»“åº“åˆ—è¡¨
            renderRepos(repos, containerId) {
                const container = document.getElementById(containerId);
                if (!container) return;

                if (repos.length === 0) {
                    container.innerHTML = '<p style="text-align: center;">æš‚æ— å…¬å¼€é¡¹ç›®ï¼Œæ•¬è¯·æœŸå¾…...</p>';
                    return;
                }

                container.innerHTML = '';
                repos.forEach(repo => {
                    const card = document.createElement('div');
                    card.className = 'project-card';
                    card.innerHTML = `
                        <h3><a href="${repo.html_url}" target="_blank">${repo.name}</a></h3>
                        <p class="project-desc">${repo.description || 'æš‚æ— ç®€ä»‹'}</p>
                        ${repo.language ? `<span class="project-lang">${repo.language}</span>` : ''}
                    `;
                    container.appendChild(card);
                });
            },

            // æ¸²æŸ“è´¡çŒ®è€…åˆ—è¡¨
            renderContributors(contributors, containerId) {
                const container = document.getElementById(containerId);
                if (!container) return;

                if (contributors.length === 0) {
                    container.innerHTML = '<p style="text-align: center;">æš‚æ— è´¡çŒ®è€…ï¼ŒæœŸå¾…ä½ çš„åŠ å…¥ âœ¨</p>';
                    return;
                }

                container.innerHTML = '';
                contributors.forEach(c => {
                    const card = document.createElement('div');
                    card.className = 'contributor-card';
                    card.innerHTML = `
                        <img class="contributor-avatar" 
                             src="https://picsum.photos/70/70" 
                             data-src="${c.avatar}" 
                             alt="${c.login}" 
                             loading="lazy">
                        <div class="contributor-name">${c.login}</div>
                        <div class="contributor-desc">å‚ä¸äº† ${c.repos.length} ä¸ªä»“åº“</div>
                        <a class="contributor-github" href="${c.html_url}" target="_blank">GitHub</a>
                    `;
                    
                    // å›¾ç‰‡æ‡’åŠ è½½
                    const img = card.querySelector('img');
                    img.onload = () => img.src = img.dataset.src;

                    container.appendChild(card);
                });
            },

            // æ¸²æŸ“é”™è¯¯æç¤º
            renderError(containerId, message) {
                const container = document.getElementById(containerId);
                if (!container) return;
                
                container.innerHTML = `
                    <p class="error-message">åŠ è½½å¤±è´¥ï¼š${message}</p>
                    <button class="retry-btn" id="retry-${containerId}">é‡è¯•</button>
                    <p style="text-align: center;">è¯·æ£€æŸ¥ç½‘ç»œæˆ–ç¨åé‡è¯•</p>
                `;
                
                // ç»‘å®šé‡è¯•æŒ‰é’®
                document.getElementById(`retry-${containerId}`).addEventListener('click', () => {
                    container.innerHTML = '<div class="loading-spinner"></div><p style="text-align: center;">æ­£åœ¨é‡æ–°åŠ è½½...</p>';
                    if (containerId === 'projectGrid') {
                        App.initRepos();
                    } else if (containerId === 'contributorGrid') {
                        App.initContributors();
                    }
                });
            },

            // åˆå§‹åŒ–æ˜Ÿç©ºèƒŒæ™¯ï¼ˆæ€§èƒ½ä¼˜åŒ–ï¼‰
            initStars() {
                const canvas = document.getElementById('stars');
                if (!canvas) {
                    console.error('æ˜Ÿç©ºCanvaså…ƒç´ ä¸å­˜åœ¨');
                    return;
                }
                
                // å…¼å®¹è·å–ä¸Šä¸‹æ–‡
                let ctx;
                try {
                    ctx = canvas.getContext('2d');
                } catch (e) {
                    console.error('è·å–Canvasä¸Šä¸‹æ–‡å¤±è´¥:', e);
                    return;
                }
                
                if (!ctx) {
                    console.error('ä¸æ”¯æŒCanvas 2Dä¸Šä¸‹æ–‡');
                    return;
                }

                // å­˜å‚¨æ˜Ÿæ˜Ÿçš„æ•°ç»„ï¼ˆæ”¹ä¸ºå±€éƒ¨å˜é‡ï¼Œé¿å…å…¨å±€æ±¡æŸ“ï¼‰
                let stars = [];

                // å“åº”å¼ç”»å¸ƒå°ºå¯¸
                const resizeCanvas = Utils.debounce(() => {
                    canvas.width = window.innerWidth;
                    canvas.height = window.innerHeight;
                    // é‡æ–°åˆ›å»ºæ˜Ÿæ˜Ÿ
                    stars = [];
                    for (let i = 0; i < AppConfig.performance.starCount; i++) {
                        stars.push(new Star(ctx, canvas.width, canvas.height));
                    }
                }, 200);

                // åˆå§‹è°ƒæ•´å°ºå¯¸
                resizeCanvas();
                window.addEventListener('resize', resizeCanvas);

                // ä¼˜åŒ–åŠ¨ç”»å¾ªç¯
                function animate() {
                    // æ¸…ç©ºç”»å¸ƒ
                    ctx.clearRect(0, 0, canvas.width, canvas.height);
                    
                    // æ›´æ–°å¹¶ç»˜åˆ¶æ‰€æœ‰æ˜Ÿæ˜Ÿ
                    for (let i = 0; i < stars.length; i++) {
                        stars[i].update();
                    }
                    
                    // ç»§ç»­åŠ¨ç”»
                    requestAnimationFrame(animate);
                }

                // å¯åŠ¨åŠ¨ç”»
                animate();
            }
        };

        // ========== 5. æ˜Ÿæ˜Ÿç±»ï¼ˆå°è£…ç²’å­é€»è¾‘ï¼‰ ==========
        class Star {
            constructor(ctx, canvasWidth, canvasHeight) {
                this.ctx = ctx;
                this.x = Math.random() * canvasWidth;
                this.y = Math.random() * canvasHeight;
                // å¢å¤§æ˜Ÿæ˜Ÿå°ºå¯¸ï¼Œç¡®ä¿å¯è§
                this.r = Math.random() * 1.2 + 0.3;
                // è°ƒæ•´é€Ÿåº¦ï¼Œè®©åŠ¨ç”»æ›´æ˜æ˜¾
                this.speed = Math.random() * 0.3 + 0.1;
                // åˆå§‹é€æ˜åº¦ï¼Œç¡®ä¿æ˜Ÿæ˜Ÿå¯è§
                this.alpha = Math.random() * 0.8 + 0.2;
                this.baseAlpha = this.alpha;
            }

            // ç»˜åˆ¶æ˜Ÿæ˜Ÿ
            draw() {
                this.ctx.beginPath();
                this.ctx.arc(this.x, this.y, this.r, 0, Math.PI * 2);
                this.ctx.fillStyle = `rgba(255,255,255,${this.alpha})`;
                this.ctx.fill();
            }

            // æ›´æ–°æ˜Ÿæ˜Ÿä½ç½®å’Œé€æ˜åº¦
            update() {
                // å‚ç›´ç§»åŠ¨
                this.y += this.speed;
                
                // é€æ˜åº¦å‘¼å¸æ•ˆæœï¼ˆä¼˜åŒ–è®¡ç®—ï¼Œç¡®ä¿ä¸é€æ˜ï¼‰
                this.alpha = Math.sin(Date.now() * 0.0005 + this.x * 0.01) * 0.3 + this.baseAlpha;
                
                // è¶…å‡ºç”»å¸ƒé‡ç½®ä½ç½®
                if (this.y > this.ctx.canvas.height) {
                    this.y = 0;
                    this.x = Math.random() * this.ctx.canvas.width;
                }
                
                // ç»˜åˆ¶
                this.draw();
            }
        }

        // ========== 6. åº”ç”¨ä¸»é€»è¾‘ ==========
        const App = {
            // åˆå§‹åŒ–
            init() {
                // åˆå§‹åŒ–æ˜Ÿç©ºèƒŒæ™¯ï¼ˆä¼˜å…ˆæ‰§è¡Œï¼‰
                UIRenderer.initStars();
                // ç»‘å®šäº‹ä»¶
                this.bindEvents();
                // é¢„åŠ è½½è´¡çŒ®è€…æ•°æ®
                this.initContributors();
            },

            // ç»‘å®šæ‰€æœ‰äº‹ä»¶
            bindEvents() {
                // èœå•æŒ‰é’®
                const menuBtn = document.getElementById('menuBtn');
                const navMenu = document.getElementById('navMenu');
                
                menuBtn.addEventListener('click', (e) => {
                    e.stopPropagation();
                    navMenu.classList.toggle('active');
                });

                // ç‚¹å‡»ç©ºç™½å¤„å…³é—­èœå•
                document.addEventListener('click', (e) => {
                    if (!navMenu.contains(e.target) && e.target !== menuBtn) {
                        navMenu.classList.remove('active');
                    }
                });

                // æ˜Ÿçƒç‚¹å‡»äº‹ä»¶
                document.querySelectorAll('.nebula-planet:not(#guide)').forEach(planet => {
                    planet.addEventListener('click', () => {
                        const targetId = planet.getAttribute('data-target');
                        this.showDetail(targetId);
                        this.updateNavActive(planet.id);
                        navMenu.classList.remove('active');
                        
                        // åŠ è½½é¡¹ç›®æ•°æ®
                        if (planet.id === 'projects') {
                            this.initRepos();
                        }
                    });
                });

                // å¯¼èˆªé“¾æ¥ç‚¹å‡»
                document.querySelectorAll('.nav-link').forEach(link => {
                    link.addEventListener('click', (e) => {
                        if (link.getAttribute('href') === '/guide.html') return;
                        e.preventDefault();
                        const targetId = link.getAttribute('data-target');
                        const planet = document.getElementById(targetId);
                        if (planet) {
                            const detailId = planet.getAttribute('data-target');
                            this.showDetail(detailId);
                            this.updateNavActive(targetId);
                            navMenu.classList.remove('active');
                            
                            if (targetId === 'projects') {
                                this.initRepos();
                            }
                        }
                    });
                });

                // å…³é—­è¯¦æƒ…å¼¹çª—
                document.querySelectorAll('.close-detail').forEach(btn => {
                    btn.addEventListener('click', () => {
                        const detail = btn.closest('.planet-detail');
                        detail.classList.remove('active');
                        document.body.style.overflow = '';
                    });
                });
            },

            // æ˜¾ç¤ºè¯¦æƒ…å¼¹çª—
            showDetail(detailId) {
                document.querySelectorAll('.planet-detail').forEach(detail => {
                    detail.classList.remove('active');
                });
                
                const target = document.getElementById(detailId);
                if (target) {
                    target.classList.add('active');
                    document.body.style.overflow = 'hidden';
                }
            },

            // æ›´æ–°å¯¼èˆªé«˜äº®
            updateNavActive(activeId) {
                document.querySelectorAll('.nav-link').forEach(link => {
                    link.classList.remove('active');
                    if (link.getAttribute('data-target') === activeId) {
                        link.classList.add('active');
                    }
                });
            },

            // åˆå§‹åŒ–ä»“åº“æ•°æ®
            async initRepos() {
                const container = document.getElementById('projectGrid');
                try {
                    const repos = await GitHubAPI.getAllRepos();
                    UIRenderer.renderRepos(repos, 'projectGrid');
                } catch (err) {
                    UIRenderer.renderError('projectGrid', err.message);
                }
            },

            // åˆå§‹åŒ–è´¡çŒ®è€…æ•°æ®
            async initContributors() {
                const container = document.getElementById('contributorGrid');
                try {
                    const contributors = await GitHubAPI.getAllContributors();
                    UIRenderer.renderContributors(contributors, 'contributorGrid');
                } catch (err) {
                    UIRenderer.renderError('contributorGrid', err.message);
                }
            }
        };

        // é¡µé¢åŠ è½½å®Œæˆååˆå§‹åŒ–åº”ç”¨
        window.addEventListener('load', () => {
            // ç¡®ä¿DOMå®Œå…¨åŠ è½½
            setTimeout(() => App.init(), 100);
        });
    </script>
</body>
</html>