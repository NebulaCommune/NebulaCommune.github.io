<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>{{ .Site.Title }}</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        html {
            scroll-behavior: smooth;
        }

        body {
            font-family: "PingFang SC", "Microsoft YaHei", sans-serif;
            line-height: 1.8;
            color: #e0e0e0;
            /* å¤šæ˜Ÿäº‘èƒŒæ™¯å åŠ  */
            background: 
                url('https://picsum.photos/id/1039/1920/1080') center/cover no-repeat fixed,
                url('https://picsum.photos/id/1046/1920/1080') center/cover no-repeat fixed,
                url('https://picsum.photos/id/1015/1920/1080') center/cover no-repeat fixed;
            background-blend-mode: overlay;
            min-height: 100vh;
            overflow-x: hidden;
            position: relative;
        }

        /* åŠ¨æ€æ˜Ÿäº‘å›¾å±‚ */
        .nebula-layer {
            position: fixed;
            top: 0;
            left: 0;
            width: 120%;
            height: 120%;
            background: 
                radial-gradient(circle at 20% 30%, rgba(120,119,198,0.15) 0%, transparent 40%),
                radial-gradient(circle at 80% 70%, rgba(255,119,198,0.1) 0%, transparent 40%),
                radial-gradient(circle at 40% 80%, rgba(119,200,255,0.08) 0%, transparent 40%);
            z-index: -3;
            animation: nebula-float 80s ease-in-out infinite alternate;
        }

        @keyframes nebula-float {
            0% { transform: translate(0, 0) scale(1); }
            50% { transform: translate(-20px, -10px) scale(1.05); }
            100% { transform: translate(20px, 10px) scale(0.98); }
        }

        /* æ˜Ÿç©ºç”»å¸ƒ */
        #stars {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            z-index: -2;
        }

        /* èƒŒæ™¯é®ç½© */
        body::before {
            content: '';
            position: fixed;
            top: 0; left: 0;
            width: 100%; height: 100%;
            background: rgba(10,14,39,0.85);
            pointer-events: none;
            z-index: -1;
        }

        /* é¼ æ ‡å…‰æ™• */
        .mouse-glow {
            position: fixed;
            width: 700px;
            height: 700px;
            border-radius: 50%;
            background: radial-gradient(circle, rgba(120,119,198,0.18) 0%, transparent 65%);
            pointer-events: none;
            z-index: 0;
            transform: translate(-50%, -50%);
            transition: transform 0.12s ease-out, opacity 0.4s;
            mix-blend-mode: screen;
            opacity: 0;
        }

        /* æ±‰å ¡èœå• */
        .menu-toggle {
            display: none;
            position: fixed;
            top: 20px;
            left: 20px;
            z-index: 101;
            background: rgba(120,119,198,0.8);
            color: white;
            border: none;
            padding: 10px 15px;
            border-radius: 8px;
            cursor: pointer;
        }

        /* ä¾§è¾¹æ  */
        .sidebar {
            position: fixed;
            top: 0; left: 0;
            width: 280px;
            height: 100vh;
            background: rgba(255,255,255,0.05);
            backdrop-filter: blur(12px);
            border-right: 1px solid rgba(255,255,255,0.1);
            padding: 40px 30px;
            z-index: 100;
            transition: transform 0.3s;
        }

        .sidebar h2 {
            font-size: 1.5rem;
            background: linear-gradient(90deg, #7877c6, #ff77c6);
            -webkit-background-clip: text;
            background-clip: text;
            -webkit-text-fill-color: transparent;
            margin-bottom: 30px;
            padding-bottom: 15px;
            border-bottom: 2px solid rgba(120,119,198,0.3);
        }

        .sidebar nav ul {
            list-style: none;
        }

        .sidebar nav ul li {
            margin-bottom: 15px;
        }

        .sidebar nav ul li a {
            color: #b0b0c0;
            text-decoration: none;
            font-size: 1.1rem;
            padding: 10px 15px;
            border-radius: 10px;
            display: block;
            transition: 0.3s;
            cursor: pointer;
        }

        .sidebar nav ul li a:hover,
        .sidebar nav ul li a.active {
            background: rgba(120,119,198,0.2);
            color: #fff;
            transform: translateX(5px);
        }

        /* ä¸»å†…å®¹ */
        .main-content {
            margin-left: 280px;
            padding: 40px;
            max-width: 1200px;
            position: relative;
            z-index: 1;
        }

        /* æ˜Ÿäº‘å¡ç‰‡ - æ ¸å¿ƒï¼šé»˜è®¤åªæ˜¾ç¤ºæ ‡é¢˜ï¼Œç‚¹å‡»å±•å¼€ */
        .nebula-card {
            background: rgba(255,255,255,0.05);
            backdrop-filter: blur(12px);
            padding: 30px 40px;
            border-radius: 24px;
            border: 1px solid rgba(255,255,255,0.1);
            box-shadow: 0 8px 32px rgba(0,0,0,0.3);
            margin-bottom: 40px;
            transition: all 0.4s ease;
            opacity: 0;
            transform: translateY(40px);
            cursor: pointer; /* æç¤ºå¯ç‚¹å‡» */
            position: relative;
            overflow: hidden;
        }

        /* å¡ç‰‡æ˜¾éšåŠ¨ç”» */
        .nebula-card.visible {
            opacity: 1;
            transform: translateY(0);
        }

        /* å¡ç‰‡æ‚¬æµ®æ•ˆæœ */
        .nebula-card:hover {
            border-color: rgba(120,119,198,0.5);
            box-shadow: 0 16px 40px rgba(120,119,198,0.25);
        }

        /* å¡ç‰‡æ ‡é¢˜æ ·å¼ */
        .nebula-card h2 {
            font-size: 2.2rem;
            background: linear-gradient(90deg, #7877c6, #ff77c6);
            -webkit-background-clip: text;
            background-clip: text;
            -webkit-text-fill-color: transparent;
            margin-bottom: 0; /* é»˜è®¤æ— é—´è· */
            padding-bottom: 15px;
            border-bottom: 2px solid rgba(120,119,198,0.3);
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        /* å±•å¼€/æ”¶èµ·å›¾æ ‡ */
        .card-toggle-icon {
            font-size: 1.5rem;
            transition: transform 0.3s ease;
        }

        .nebula-card.expanded .card-toggle-icon {
            transform: rotate(180deg);
        }

        /* å¡ç‰‡å†…å®¹å®¹å™¨ - é»˜è®¤éšè— */
        .card-content {
            max-height: 0;
            overflow: hidden;
            transition: max-height 0.5s ease, margin-top 0.3s ease;
            margin-top: 0;
            padding-top: 0;
        }

        /* å±•å¼€çŠ¶æ€çš„å†…å®¹å®¹å™¨ */
        .nebula-card.expanded .card-content {
            max-height: 5000px; /* è¶³å¤Ÿå¤§çš„æ•°å€¼å®¹çº³æ‰€æœ‰å†…å®¹ */
            margin-top: 25px;
            padding-top: 15px;
        }

        /* å¡ç‰‡å†…åŸºç¡€æ ·å¼ */
        .card-content h3 {
            color: #d0d0e0;
            margin-bottom: 15px;
        }

        .card-content p,
        .card-content li {
            color: #c0c0d0;
            margin-bottom: 12px;
        }

        .project-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 25px;
            margin-top: 30px;
        }

        .project-card {
            padding: 25px;
            background: rgba(255,255,255,0.08);
            backdrop-filter: blur(10px);
            border-radius: 16px;
            border: 1px solid rgba(255,255,255,0.1);
            transition: 0.3s;
        }

        .project-card:hover {
            transform: translateY(-6px);
            border-color: rgba(120,119,198,0.5);
        }

        .project-card a {
            color: #7877c6;
            font-weight: 600;
            text-decoration: none;
        }

        .project-card a:hover {
            color: #ff77c6;
        }

        .project-desc {
            color: #a0a0c0;
            font-size: 0.95rem;
        }

        .project-lang {
            display: inline-block;
            padding: 6px 12px;
            background: rgba(120,119,198,0.2);
            border-radius: 20px;
            font-size: 0.85rem;
            color: #c0c0e0;
        }

        /* å‹é“¾æ ·å¼ */
        .links-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 25px;
            margin-top: 30px;
        }

        .link-card {
            padding: 25px;
            background: rgba(255,255,255,0.08);
            backdrop-filter: blur(10px);
            border-radius: 16px;
            border: 1px solid rgba(255,255,255,0.1);
            transition: 0.3s;
            text-align: center;
        }

        .link-card:hover {
            transform: translateY(-6px);
            border-color: rgba(120,119,198,0.5);
        }

        .link-card a {
            color: #7877c6;
            font-weight: 600;
            text-decoration: none;
            font-size: 1.1rem;
            display: block;
            margin-bottom: 10px;
        }

        .link-card a:hover {
            color: #ff77c6;
        }

        .link-desc {
            color: #a0a0c0;
            font-size: 0.95rem;
        }

        /* è´¡çŒ®è€…æ ·å¼ - å°å±é€‚é… */
        .contributor-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(160px, 1fr));
            gap: 15px;
            margin-top: 30px;
        }

        .contributor-card {
            padding: 25px;
            background: rgba(255,255,255,0.08);
            backdrop-filter: blur(10px);
            border-radius: 16px;
            border: 1px solid rgba(255,255,255,0.1);
            text-align: center;
            transition: 0.3s;
        }

        .contributor-card:hover {
            transform: translateY(-6px);
            border-color: rgba(120,119,198,0.5);
        }

        .contributor-avatar {
            width: 80px;
            height: 80px;
            border-radius: 50%;
            margin: 0 auto 15px;
            object-fit: cover;
            border: 2px solid rgba(120,119,198,0.4);
        }

        .contributor-name {
            font-size: 1.1rem;
            font-weight: 600;
            color: #e0e0e0;
            margin-bottom: 8px;
        }

        .contributor-desc {
            font-size: 0.9rem;
            color: #a0a0c0;
            margin-bottom: 10px;
        }

        .contributor-github {
            display: inline-block;
            color: #7877c6;
            font-size: 0.9rem;
            text-decoration: none;
        }

        .contributor-github:hover {
            color: #ff77c6;
        }

        /* åŠ è½½åŠ¨ç”»æ ·å¼ */
        .loading-spinner {
            display: inline-block;
            width: 40px;
            height: 40px;
            border: 4px solid rgba(120,119,198,0.2);
            border-radius: 50%;
            border-top-color: #7877c6;
            animation: spin 1s ease-in-out infinite;
            margin: 20px auto;
            display: block;
        }

        @keyframes spin {
            to { transform: rotate(360deg); }
        }

        .community-group {
            margin-bottom: 30px;
            padding: 25px;
            background: rgba(255,255,255,0.05);
            border-radius: 16px;
            border: 1px solid rgba(255,255,255,0.1);
        }

        footer {
            text-align: center;
            padding: 30px;
            background: rgba(255,255,255,0.05);
            backdrop-filter: blur(10px);
            border-radius: 24px;
            border: 1px solid rgba(255,255,255,0.1);
            color: #8080a0;
            opacity: 0;
            transform: translateY(40px);
            transition: 0.6s ease;
            margin-top: 20px;
        }

        footer.visible {
            opacity: 1;
            transform: translateY(0);
        }

        /* ç§»åŠ¨ç«¯ */
        @media (max-width: 1024px) {
            .menu-toggle {
                display: block;
            }
            .sidebar {
                transform: translateX(-100%);
            }
            .sidebar.active {
                transform: translateX(0);
            }
            .main-content {
                margin-left: 0;
                padding: 20px;
            }
            .mouse-glow {
                display: none;
            }
            .nebula-layer {
                animation-duration: 120s;
            }
            /* ç§»åŠ¨ç«¯ç¦ç”¨æ¨¡ç³Šæå‡æ€§èƒ½ */
            .sidebar, .nebula-card, .project-card, .link-card, .contributor-card, .community-group, footer {
                backdrop-filter: none;
            }
            /* ç§»åŠ¨ç«¯å¡ç‰‡æ ‡é¢˜å­—å·è°ƒæ•´ */
            .nebula-card h2 {
                font-size: 1.8rem;
            }
        }
    </style>
</head>

<body>
    <!-- å¤šæ˜Ÿäº‘èƒŒæ™¯å›¾å±‚ -->
    <div class="nebula-layer"></div>
    <!-- æ˜Ÿç©ºç²’å­ -->
    <canvas id="stars"></canvas>
    <!-- é¼ æ ‡å…‰æ™• -->
    <div class="mouse-glow" id="mouseGlow"></div>
    <!-- æ±‰å ¡èœå• -->
    <button class="menu-toggle">â˜°</button>

    <!-- ä¾§è¾¹å¯¼èˆª -->
    <aside class="sidebar">
        <h2>NebulaCommune</h2>
        <nav>
            <ul>
                <li><a data-target="about" class="nav-link">å…³äºæˆ‘ä»¬</a></li>
                <li><a data-target="projects" class="nav-link">æ ¸å¿ƒé¡¹ç›®</a></li>
                <li><a data-target="community" class="nav-link">ç¤¾åŒºç”Ÿæ€</a></li>
                <li><a data-target="contributors" class="nav-link">è´¡çŒ®è€…</a></li>
                <li><a data-target="links" class="nav-link">å‹æƒ…é“¾æ¥</a></li>
                <li><a data-target="join" class="nav-link">åŠ å…¥æˆ‘ä»¬</a></li>
            </ul>
        </nav>
    </aside>

    <!-- å†…å®¹åŒº -->
    <main class="main-content">
        <!-- å…³äºæˆ‘ä»¬ - æ˜Ÿäº‘å¡ç‰‡ -->
        <section id="about" class="nebula-card">
            <h2>
                å…³äºæˆ‘ä»¬
                <span class="card-toggle-icon">â–¼</span>
            </h2>
            <div class="card-content">
                <p>æ˜Ÿéš…å…±å­¦ç¤¾åŒºï¼ˆNebulaCommuneï¼‰æ˜¯ä¸€ä¸ªå¼€æ”¾åŒ…å®¹çš„æŠ€æœ¯å­¦ä¹ ä¸åä½œç¤¾åŒºã€‚æˆ‘ä»¬ç›¸ä¿¡çŸ¥è¯†çš„ä»·å€¼åœ¨äºåˆ†äº«ä¸ç¢°æ’ï¼Œè‡´åŠ›äºä¸ºæ¯ä¸€ä½æˆå‘˜æä¾›ä¸€ä¸ªè‡ªç”±ã€äº’åŠ©çš„æˆé•¿ç©ºé—´ã€‚</p>
                <ul>
                    <li>æ ¸å¿ƒç†å¿µï¼šå¼€æ”¾åŒ…å®¹ï¼Œå…¼æ”¶å¹¶è“„ï¼Œå…±å­¦å…±è¿›</li>
                    <li>æ„¿æ™¯ï¼šæ±‡èšæ˜Ÿå…‰ï¼Œå…±ç­‘æœªæ¥</li>
                    <li>ä½¿å‘½ï¼šæ‰“é€ ä¸€ä¸ªå¤šå…ƒã€åä½œã€å¯æŒç»­çš„æŠ€æœ¯ç”Ÿæ€</li>
                </ul>
            </div>
        </section>

        <!-- æ ¸å¿ƒé¡¹ç›® - æ˜Ÿäº‘å¡ç‰‡ -->
        <section id="projects" class="nebula-card">
            <h2>
                æ ¸å¿ƒé¡¹ç›®
                <span class="card-toggle-icon">â–¼</span>
            </h2>
            <div class="card-content">
                <div class="project-grid">
                    {{ $apiUrl := .Site.Params.github_api_url }}
                    {{ $repos := slice }}
                    {{ if $apiUrl }}
                        {{ $resp := resources.GetRemote $apiUrl }}
                        {{ if $resp }}
                            {{ $repos = $resp | transform.Unmarshal }}
                        {{ else }}
                            {{ warnf "Failed to fetch GitHub repos: API URL is invalid or unreachable" }}
                        {{ end }}
                    {{ end }}
                    {{ if eq (len $repos) 0 }}
                        <p>æš‚æ— å…¬å¼€é¡¹ç›®ï¼Œæ•¬è¯·æœŸå¾…...</p>
                    {{ else }}
                        {{ range $repos }}
                            {{ if not .private }}
                            <div class="project-card">
                                <h3><a href="{{ .html_url }}" target="_blank">{{ .name }}</a></h3>
                                <p class="project-desc">{{ default "æš‚æ— ç®€ä»‹" .description }}</p>
                                <span class="project-lang">{{ default "æœªçŸ¥" .language }}</span>
                            </div>
                            {{ end }}
                        {{ end }}
                    {{ end }}
                </div>
            </div>
        </section>

        <!-- ç¤¾åŒºç”Ÿæ€ - æ˜Ÿäº‘å¡ç‰‡ -->
        <section id="community" class="nebula-card">
            <h2>
                ç¤¾åŒºç”Ÿæ€
                <span class="card-toggle-icon">â–¼</span>
            </h2>
            <div class="card-content">
                <div class="community-group">
                    <h3>ğŸ’¬ NebulaCommune æ°´ç¾¤</h3>
                    <p>æ—¥å¸¸äº¤æµã€èµ„æºå…±äº«ä¸ç”Ÿæ´»åˆ†äº«çš„è½»æ¾ç©ºé—´ã€‚</p>
                    <ul>
                        <li>è¯¾ç¨‹ä½œä¸šä¸æœŸæœ«å¤ä¹ ç»éªŒ</li>
                        <li>ç§‘ç ”/é¡¹ç›®ç»„é˜Ÿä¸æŠ€æœ¯é€‰å‹</li>
                        <li>å®ä¹ /æ ¡æ‹›é¢ç»ä¸å†…æ¨ä¿¡æ¯</li>
                        <li>å·¥å…·æ¨èä¸æ•ˆç‡æå‡æŠ€å·§</li>
                    </ul>
                </div>
                <div class="community-group">
                    <h3>ğŸ’¬ NebulaCommune æ ¸å¿ƒç¾¤</h3>
                    <p>æ ¸å¿ƒæˆå‘˜æ·±åº¦äº¤æµå¹³å°ï¼Œèšç„¦æŠ€æœ¯ã€é¡¹ç›®ä¸ç¤¾åŒºæ²»ç†ã€‚</p>
                </div>
            </div>
        </section>

        <!-- è´¡çŒ®è€… - æ˜Ÿäº‘å¡ç‰‡ -->
        <section id="contributors" class="nebula-card">
            <h2>
                è´¡çŒ®è€…
                <span class="card-toggle-icon">â–¼</span>
            </h2>
            <div class="card-content">
                <p>æ„Ÿè°¢æ¯ä¸€ä½ä¸º NebulaCommune è´¡çŒ®åŠ›é‡çš„ä¼™ä¼´ âœ¨</p>
                <div class="contributor-grid" id="contributorGrid">
                    <div class="loading-spinner"></div>
                    <p style="text-align: center;">æ­£åœ¨åŠ è½½è´¡çŒ®è€…æ•°æ®...</p>
                </div>
            </div>
        </section>

        <!-- å‹æƒ…é“¾æ¥ - æ˜Ÿäº‘å¡ç‰‡ -->
        <section id="links" class="nebula-card">
            <h2>
                å‹æƒ…é“¾æ¥
                <span class="card-toggle-icon">â–¼</span>
            </h2>
            <div class="card-content">
                <div class="links-grid">
                    <div class="link-card">
                        <a href="https://duckweed-yhb.github.io/" target="_blank">Duckweed's Blog</a>
                        <p class="link-desc">ä¸ªäººæŠ€æœ¯åšå®¢ï¼Œåˆ†äº«å­¦ä¹ ä¸å®è·µå¿ƒå¾—</p>
                    </div>
                </div>
            </div>
        </section>

        <!-- åŠ å…¥æˆ‘ä»¬ - æ˜Ÿäº‘å¡ç‰‡ -->
        <section id="join" class="nebula-card">
            <h2>
                åŠ å…¥æˆ‘ä»¬
                <span class="card-toggle-icon">â–¼</span>
            </h2>
            <div class="card-content">
                <ol>
                    <li>è´¡çŒ®ä»£ç ï¼šFork é¡¹ç›®ï¼Œæäº¤ Pull Request</li>
                    <li>åˆ†äº«èµ„æºï¼šåœ¨ awesome-resources åˆ†äº«ä¼˜è´¨å†…å®¹</li>
                    <li>å‚ä¸è®¨è®ºï¼šåŠ å…¥å¾®ä¿¡ç¾¤ï¼Œä¸€èµ·å­¦ä¹ æˆé•¿</li>
                    <li>æå‡ºå»ºè®®ï¼šé€šè¿‡ Issue å‘Šè¯‰æˆ‘ä»¬ä½ çš„æƒ³æ³•</li>
                </ol>
            </div>
        </section>

        <footer id="footer">
            <p>æ¬¢è¿ Star & Forkï¼Œä¸æˆ‘ä»¬ä¸€èµ·ï¼Œåœ¨æŠ€æœ¯çš„æ˜Ÿç©ºä¸­å…±åŒæˆé•¿ã€‚</p>
        </footer>
    </main>

    <script>
        // ===================== å…¨å±€é…ç½® =====================
        const CONFIG = {
            orgName: 'NebulaCommune',
            cacheKeys: {
                contributors: 'nebula_contributors_cache',
                contributorsTime: 'nebula_contributors_cache_time'
            },
            apiBaseUrl: 'https://api.github.com',
            cacheExpireMs: 24 * 60 * 60 * 1000,
            batchSize: 5,
            requestTimeout: 10000,
            githubToken: ''
        };

        // ===================== å·¥å…·å‡½æ•° =====================
        const storage = {
            get: (key) => {
                try {
                    return localStorage.getItem(key);
                } catch (e) {
                    console.warn('æœ¬åœ°å­˜å‚¨ä¸å¯ç”¨:', e);
                    return null;
                }
            },
            set: (key, value) => {
                try {
                    localStorage.setItem(key, value);
                } catch (e) {
                    console.warn('æœ¬åœ°å­˜å‚¨ä¸å¯ç”¨:', e);
                }
            }
        };

        const debounce = (fn, delay = 50) => {
            let timer = null;
            return (...args) => {
                clearTimeout(timer);
                timer = setTimeout(() => fn.apply(this, args), delay);
            };
        };

        const fetchWithTimeout = (url, options = {}) => {
            return Promise.race([
                fetch(url, options),
                new Promise((_, reject) => 
                    setTimeout(() => reject(new Error('è¯·æ±‚è¶…æ—¶')), options.timeout || CONFIG.requestTimeout)
                )
            ]);
        };

        // ===================== æ˜Ÿç©ºç²’å­ =====================
        const canvas = document.getElementById('stars');
        const ctx = canvas.getContext?.('2d');
        let w, h;
        const starsArr = [];
        
        const isLowPerformance = navigator.hardwareConcurrency < 4 || window.innerWidth < 768;
        const starCount = isLowPerformance ? 60 : 180;

        class Star {
            constructor(){
                this.x = Math.random()*w;
                this.y = Math.random()*h;
                this.r = Math.random()*1.2;
                this.speed = Math.random()*0.3;
            }
            draw(){
                if (!ctx) return;
                ctx.beginPath();
                ctx.arc(this.x,this.y,this.r,0,Math.PI*2);
                ctx.fillStyle = '#fff';
                ctx.globalAlpha = Math.random();
                ctx.fill();
            }
            update(){
                this.y += this.speed;
                if(this.y > h) this.y = 0;
                this.draw();
            }
        }

        function initStars(){
            if (!ctx) return;
            starsArr.length = 0;
            for(let i=0; i<starCount; i++) starsArr.push(new Star());
        }

        function animateStars(){
            if (!ctx) return;
            ctx.clearRect(0,0,w,h);
            starsArr.forEach(s=>s.update());
            requestAnimationFrame(animateStars);
        }

        try {
            w = canvas.width = window.innerWidth;
            h = canvas.height = window.innerHeight;
            initStars(); 
            animateStars();
        } catch (e) {
            console.error('æ˜Ÿç©ºç²’å­åˆå§‹åŒ–å¤±è´¥:', e);
            canvas.style.display = 'none';
        }

        window.onresize = ()=>{
            if (!ctx) return;
            w = canvas.width = window.innerWidth;
            h = canvas.height = window.innerHeight;
            initStars();
        };

        // ===================== é¼ æ ‡å…‰æ™• =====================
        try {
            const glow = document.getElementById('mouseGlow');
            document.addEventListener('mousemove',e=>{
                glow.style.opacity = 1;
                glow.style.left = e.clientX+'px';
                glow.style.top = e.clientY+'px';
            });
            document.addEventListener('mouseleave',()=>{
                glow.style.opacity = 0;
            });
        } catch (e) {
            console.error('é¼ æ ‡å…‰æ™•åˆå§‹åŒ–å¤±è´¥:', e);
        }

        // ===================== æ±‰å ¡èœå• =====================
        const menuToggle = document.querySelector('.menu-toggle');
        const sidebar = document.querySelector('.sidebar');
        if (menuToggle && sidebar) {
            menuToggle.addEventListener('click', () => {
                sidebar.classList.toggle('active');
            });
        }

        // ===================== æ ¸å¿ƒåŠŸèƒ½ï¼šæ˜Ÿäº‘å¡ç‰‡å±•å¼€/æ”¶èµ· =====================
        const nebulaCards = document.querySelectorAll('.nebula-card');
        const navLinks = document.querySelectorAll('.nav-link');

        // 1. å¡ç‰‡ç‚¹å‡»å±•å¼€/æ”¶èµ·
        nebulaCards.forEach(card => {
            // å¡ç‰‡æ˜¾éšåŠ¨ç”»
            card.classList.add('visible');
            
            // ç‚¹å‡»å¡ç‰‡åˆ‡æ¢å±•å¼€/æ”¶èµ·çŠ¶æ€
            card.addEventListener('click', function(e) {
                // é¿å…ç‚¹å‡»å†…éƒ¨é“¾æ¥æ—¶è§¦å‘æ”¶èµ·
                if (e.target.tagName === 'A' || e.target.closest('a')) return;
                
                this.classList.toggle('expanded');
                
                // æ»šåŠ¨åˆ°å¡ç‰‡ä¸­å¿ƒï¼ˆå±•å¼€æ—¶ï¼‰
                if (this.classList.contains('expanded')) {
                    scrollToCardCenter(this);
                }
                
                // æ›´æ–°å¯¼èˆªé«˜äº®
                updateNavActive(this.id);
            });
        });

        // 2. å¯¼èˆªé“¾æ¥ç‚¹å‡»ï¼šå±•å¼€å¯¹åº”å¡ç‰‡å¹¶æ»šåŠ¨åˆ°ä¸­å¿ƒ
        navLinks.forEach(link => {
            link.addEventListener('click', function() {
                const targetId = this.getAttribute('data-target');
                const targetCard = document.getElementById(targetId);
                
                if (targetCard) {
                    // å±•å¼€ç›®æ ‡å¡ç‰‡
                    targetCard.classList.add('expanded');
                    // æ”¶èµ·å…¶ä»–å¡ç‰‡
                    nebulaCards.forEach(card => {
                        if (card.id !== targetId) {
                            card.classList.remove('expanded');
                        }
                    });
                    // æ»šåŠ¨åˆ°å¡ç‰‡ä¸­å¿ƒ
                    scrollToCardCenter(targetCard);
                    // æ›´æ–°å¯¼èˆªé«˜äº®
                    updateNavActive(targetId);
                    // ç§»åŠ¨ç«¯å…³é—­ä¾§è¾¹æ 
                    if (sidebar && sidebar.classList.contains('active')) {
                        sidebar.classList.remove('active');
                    }
                }
            });
        });

        // è¾…åŠ©å‡½æ•°ï¼šæ»šåŠ¨åˆ°å¡ç‰‡ä¸­å¿ƒ
        function scrollToCardCenter(card) {
            const cardRect = card.getBoundingClientRect();
            const cardCenter = cardRect.top + window.pageYOffset + (cardRect.height / 2);
            const viewportCenter = window.innerHeight / 2;
            const scrollToY = cardCenter - viewportCenter;

            window.scrollTo({
                top: scrollToY,
                behavior: 'smooth'
            });
        }

        // è¾…åŠ©å‡½æ•°ï¼šæ›´æ–°å¯¼èˆªé«˜äº®
        function updateNavActive(activeId) {
            navLinks.forEach(link => {
                link.classList.remove('active');
                if (link.getAttribute('data-target') === activeId) {
                    link.classList.add('active');
                }
            });
        }

        // ===================== æ»šåŠ¨æ£€æµ‹ï¼ˆå¤‡ç”¨ï¼‰ =====================
        function checkVisible(){
            // é¡µè„šæ˜¾éš
            const footer = document.getElementById('footer');
            const footerRect = footer.getBoundingClientRect();
            if (footerRect.top < window.innerHeight * 0.75) {
                footer.classList.add('visible');
            }
        }

        window.addEventListener('scroll', debounce(checkVisible));
        window.addEventListener('load', checkVisible);

        // ===================== è´¡çŒ®è€…æ•°æ®åŠ è½½ =====================
        async function fetchContributors() {
            const repoGrid = document.getElementById('contributorGrid');
            
            const cachedData = storage.get(CONFIG.cacheKeys.contributors);
            const cachedTime = storage.get(CONFIG.cacheKeys.contributorsTime);
            const now = Date.now();

            if (cachedData && cachedTime && (now - parseInt(cachedTime) < CONFIG.cacheExpireMs)) {
                const contributors = JSON.parse(cachedData);
                renderContributors(contributors);
                return;
            }

            const requestOptions = {
                method: 'GET',
                headers: {
                    'Accept': 'application/vnd.github.v3+json'
                },
                timeout: CONFIG.requestTimeout
            };

            if (CONFIG.githubToken) {
                requestOptions.headers['Authorization'] = `token ${CONFIG.githubToken}`;
            }

            try {
                const reposResp = await fetchWithTimeout(
                    `${CONFIG.apiBaseUrl}/orgs/${CONFIG.orgName}/repos`, 
                    requestOptions
                );
                
                if (!reposResp.ok) throw new Error(`GitHub API é”™è¯¯: ${reposResp.status}`);
                const repos = await reposResp.json();

                const contributorsMap = new Map();
                const publicRepos = repos.filter(repo => !repo.private);

                for (let i = 0; i < publicRepos.length; i += CONFIG.batchSize) {
                    const batch = publicRepos.slice(i, i + CONFIG.batchSize);
                    const batchPromises = batch.map(repo => 
                        fetchWithTimeout(`${CONFIG.apiBaseUrl}/repos/${CONFIG.orgName}/${repo.name}/contributors`, requestOptions)
                            .then(resp => resp.ok ? resp.json() : [])
                            .catch(() => [])
                    );

                    const batchResults = await Promise.all(batchPromises);
                    
                    batchResults.forEach((contribs, idx) => {
                        const repo = batch[idx];
                        contribs.forEach(c => {
                            if (contributorsMap.has(c.login)) {
                                contributorsMap.get(c.login).repos.push(repo.name);
                            } else {
                                contributorsMap.set(c.login, {
                                    login: c.login,
                                    avatar: c.avatar_url,
                                    html_url: c.html_url,
                                    repos: [repo.name],
                                    contributions: c.contributions
                                });
                            }
                        });
                    });
                }

                const contributors = Array.from(contributorsMap.values());
                storage.set(CONFIG.cacheKeys.contributors, JSON.stringify(contributors));
                storage.set(CONFIG.cacheKeys.contributorsTime, now.toString());
                renderContributors(contributors);

            } catch (err) {
                console.error('è·å–è´¡çŒ®è€…å¤±è´¥:', err);
                repoGrid.innerHTML = `
                    <div class="contributor-card">
                        <img class="contributor-avatar" src="https://picsum.photos/80/80" alt="é»˜è®¤å¤´åƒ">
                        <div class="contributor-name">åŠ è½½å¤±è´¥</div>
                        <div class="contributor-desc">è¯·ç¨ååˆ·æ–°é¡µé¢</div>
                        <a class="contributor-github" href="https://github.com/${CONFIG.orgName}" target="_blank">æŸ¥çœ‹ç»„ç»‡</a>
                    </div>
                `;
            }
        }

        function renderContributors(contributors) {
            const repoGrid = document.getElementById('contributorGrid');
            repoGrid.innerHTML = '';

            if (contributors.length === 0) {
                repoGrid.innerHTML = '<p style="text-align: center;">æš‚æ— è´¡çŒ®è€…ï¼ŒæœŸå¾…ä½ çš„åŠ å…¥ âœ¨</p>';
                return;
            }

            contributors.forEach(c => {
                const card = document.createElement('div');
                card.className = 'contributor-card';
                
                card.innerHTML = `
                    <img class="contributor-avatar" 
                         src="https://picsum.photos/80/80" 
                         data-src="${c.avatar}" 
                         alt="${c.login}" 
                         loading="lazy">
                    <div class="contributor-name">${c.login}</div>
                    <div class="contributor-desc">å‚ä¸äº† ${c.repos.length} ä¸ªä»“åº“</div>
                    <a class="contributor-github" href="${c.html_url}" target="_blank">GitHub</a>
                `;
                
                const img = card.querySelector('img');
                img.onload = () => {
                    img.src = img.dataset.src;
                };

                repoGrid.appendChild(card);
            });
        }

        // é¡µé¢åŠ è½½å®Œæˆåæ‹‰å–è´¡çŒ®è€…
        window.addEventListener('load', () => {
            fetchContributors();
        });
    </script>
</body>
</html>